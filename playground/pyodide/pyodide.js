"use strict";var loadPyodide=(()=>{var Z=Object.create;var w=Object.defineProperty;var ee=Object.getOwnPropertyDescriptor;var te=Object.getOwnPropertyNames;var re=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var u=(e,t)=>w(e,"name",{value:t,configurable:!0}),g=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,o)=>(typeof require<"u"?require:t)[o]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var $=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ie=(e,t)=>{for(var o in t)w(e,o,{get:t[o],enumerable:!0})},U=(e,t,o,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of te(t))!ne.call(e,a)&&a!==o&&w(e,a,{get:()=>t[a],enumerable:!(l=ee(t,a))||l.enumerable});return e};var h=(e,t,o)=>(o=e!=null?Z(re(e)):{},U(t||!e||!e.__esModule?w(o,"default",{value:e,enumerable:!0}):o,e)),oe=e=>U(w({},"__esModule",{value:!0}),e);var C=$((N,j)=>{(function(e,t){"use strict";typeof define=="function"&&define.amd?define("stackframe",[],t):typeof N=="object"?j.exports=t():e.StackFrame=t()})(N,function(){"use strict";function e(c){return!isNaN(parseFloat(c))&&isFinite(c)}u(e,"_isNumber");function t(c){return c.charAt(0).toUpperCase()+c.substring(1)}u(t,"_capitalize");function o(c){return function(){return this[c]}}u(o,"_getter");var l=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],r=["fileName","functionName","source"],n=["args"],p=["evalOrigin"],i=l.concat(a,r,n,p);function s(c){if(c)for(var y=0;y<i.length;y++)c[i[y]]!==void 0&&this["set"+t(i[y])](c[i[y]])}u(s,"StackFrame"),s.prototype={getArgs:function(){return this.args},setArgs:function(c){if(Object.prototype.toString.call(c)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=c},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(c){if(c instanceof s)this.evalOrigin=c;else if(c instanceof Object)this.evalOrigin=new s(c);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var c=this.getFileName()||"",y=this.getLineNumber()||"",v=this.getColumnNumber()||"",b=this.getFunctionName()||"";return this.getIsEval()?c?"[eval] ("+c+":"+y+":"+v+")":"[eval]:"+y+":"+v:b?b+" ("+c+":"+y+":"+v+")":c+":"+y+":"+v}},s.fromString=u(function(y){var v=y.indexOf("("),b=y.lastIndexOf(")"),X=y.substring(0,v),K=y.substring(v+1,b).split(","),T=y.substring(b+1);if(T.indexOf("@")===0)var L=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(T,""),Y=L[1],J=L[2],Q=L[3];return new s({functionName:X,args:K||void 0,fileName:Y,lineNumber:J||void 0,columnNumber:Q||void 0})},"StackFrame$$fromString");for(var d=0;d<l.length;d++)s.prototype["get"+t(l[d])]=o(l[d]),s.prototype["set"+t(l[d])]=function(c){return function(y){this[c]=!!y}}(l[d]);for(var f=0;f<a.length;f++)s.prototype["get"+t(a[f])]=o(a[f]),s.prototype["set"+t(a[f])]=function(c){return function(y){if(!e(y))throw new TypeError(c+" must be a Number");this[c]=Number(y)}}(a[f]);for(var m=0;m<r.length;m++)s.prototype["get"+t(r[m])]=o(r[m]),s.prototype["set"+t(r[m])]=function(c){return function(y){this[c]=String(y)}}(r[m]);return s})});var A=$((O,M)=>{(function(e,t){"use strict";typeof define=="function"&&define.amd?define("error-stack-parser",["stackframe"],t):typeof O=="object"?M.exports=t(C()):e.ErrorStackParser=t(e.StackFrame)})(O,u(function(t){"use strict";var o=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,a=/^(eval@)?(\[native code])?$/;return{parse:u(function(n){if(typeof n.stacktrace<"u"||typeof n["opera#sourceloc"]<"u")return this.parseOpera(n);if(n.stack&&n.stack.match(l))return this.parseV8OrIE(n);if(n.stack)return this.parseFFOrSafari(n);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:u(function(n){if(n.indexOf(":")===-1)return[n];var p=/(.+?)(?::(\d+))?(?::(\d+))?$/,i=p.exec(n.replace(/[()]/g,""));return[i[1],i[2]||void 0,i[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:u(function(n){var p=n.stack.split(`
`).filter(function(i){return!!i.match(l)},this);return p.map(function(i){i.indexOf("(eval ")>-1&&(i=i.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var s=i.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),d=s.match(/ (\(.+\)$)/);s=d?s.replace(d[0],""):s;var f=this.extractLocation(d?d[1]:s),m=d&&s||void 0,c=["eval","<anonymous>"].indexOf(f[0])>-1?void 0:f[0];return new t({functionName:m,fileName:c,lineNumber:f[1],columnNumber:f[2],source:i})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:u(function(n){var p=n.stack.split(`
`).filter(function(i){return!i.match(a)},this);return p.map(function(i){if(i.indexOf(" > eval")>-1&&(i=i.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),i.indexOf("@")===-1&&i.indexOf(":")===-1)return new t({functionName:i});var s=/((.*".+"[^@]*)?[^@]*)(?:@)/,d=i.match(s),f=d&&d[1]?d[1]:void 0,m=this.extractLocation(i.replace(s,""));return new t({functionName:f,fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:i})},this)},"ErrorStackParser$$parseFFOrSafari"),parseOpera:u(function(n){return!n.stacktrace||n.message.indexOf(`
`)>-1&&n.message.split(`
`).length>n.stacktrace.split(`
`).length?this.parseOpera9(n):n.stack?this.parseOpera11(n):this.parseOpera10(n)},"ErrorStackParser$$parseOpera"),parseOpera9:u(function(n){for(var p=/Line (\d+).*script (?:in )?(\S+)/i,i=n.message.split(`
`),s=[],d=2,f=i.length;d<f;d+=2){var m=p.exec(i[d]);m&&s.push(new t({fileName:m[2],lineNumber:m[1],source:i[d]}))}return s},"ErrorStackParser$$parseOpera9"),parseOpera10:u(function(n){for(var p=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=n.stacktrace.split(`
`),s=[],d=0,f=i.length;d<f;d+=2){var m=p.exec(i[d]);m&&s.push(new t({functionName:m[3]||void 0,fileName:m[2],lineNumber:m[1],source:i[d]}))}return s},"ErrorStackParser$$parseOpera10"),parseOpera11:u(function(n){var p=n.stack.split(`
`).filter(function(i){return!!i.match(o)&&!i.match(/^Error created at/)},this);return p.map(function(i){var s=i.split("@"),d=this.extractLocation(s.pop()),f=s.shift()||"",m=f.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,c;f.match(/\(([^)]*)\)/)&&(c=f.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var y=c===void 0||c==="[arguments not available]"?void 0:c.split(",");return new t({functionName:m,args:y,fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:i})},this)},"ErrorStackParser$$parseOpera11")}},"ErrorStackParser"))});var ve={};ie(ve,{loadPyodide:()=>D,version:()=>_});var G=h(A());var E=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&typeof process.browser=="undefined",I,F,R,B,H;async function z(){if(!E||(I=(await import("url")).default,H=await import("fs/promises"),globalThis.fetch?F=fetch:F=(await import("node-fetch")).default,B=(await import("vm")).default,R=await import("path"),k=R.sep,typeof g!="undefined"))return;let e=await import("fs"),t=await import("crypto"),o=await import("ws"),l=await import("child_process"),a={fs:e,crypto:t,ws:o,child_process:l};globalThis.require=function(r){return a[r]}}u(z,"initNodeModules");function ae(e,t){return R.resolve(t||".",e)}u(ae,"node_resolvePath");function se(e,t){return t===void 0&&(t=location),new URL(e,t).toString()}u(se,"browser_resolvePath");var P;E?P=ae:P=se;var k;E||(k="/");async function le(e,t){if(e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")){let o=await F(e);if(!o.ok)throw new Error(`Failed to load '${e}': request failed.`);return new Uint8Array(await o.arrayBuffer())}else{let o=await H.readFile(e);return new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}}u(le,"node_loadBinaryFile");async function de(e,t){let o=new URL(e,location),a=await fetch(o,t?{integrity:t}:{});if(!a.ok)throw new Error(`Failed to load '${o}': request failed.`);return new Uint8Array(await a.arrayBuffer())}u(de,"browser_loadBinaryFile");var x;E?x=le:x=de;var S;if(globalThis.document)S=u(async e=>await import(e),"loadScript");else if(globalThis.importScripts)S=u(async e=>{try{globalThis.importScripts(e)}catch(t){if(t instanceof TypeError)await import(e);else throw t}},"loadScript");else if(E)S=ce;else throw new Error("Cannot determine runtime environment");async function ce(e){e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?B.runInThisContext(await(await F(e)).text()):await import(I.pathToFileURL(e).href)}u(ce,"nodeLoadScript");function W(e){let t=e.FS,o=e.FS.filesystems.MEMFS,l=e.PATH,a={DIR_MODE:16895,FILE_MODE:33279,mount:function(r){if(!r.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return o.mount.apply(null,arguments)},syncfs:async(r,n,p)=>{try{let i=a.getLocalSet(r),s=await a.getRemoteSet(r),d=n?s:i,f=n?i:s;await a.reconcile(r,d,f),p(null)}catch(i){p(i)}},getLocalSet:r=>{let n=Object.create(null);function p(d){return d!=="."&&d!==".."}u(p,"isRealDir");function i(d){return f=>l.join2(d,f)}u(i,"toAbsolute");let s=t.readdir(r.mountpoint).filter(p).map(i(r.mountpoint));for(;s.length;){let d=s.pop(),f=t.stat(d);t.isDir(f.mode)&&s.push.apply(s,t.readdir(d).filter(p).map(i(d))),n[d]={timestamp:f.mtime,mode:f.mode}}return{type:"local",entries:n}},getRemoteSet:async r=>{let n=Object.create(null),p=await ue(r.opts.fileSystemHandle);for(let[i,s]of p)i!=="."&&(n[l.join2(r.mountpoint,i)]={timestamp:s.kind==="file"?(await s.getFile()).lastModifiedDate:new Date,mode:s.kind==="file"?a.FILE_MODE:a.DIR_MODE});return{type:"remote",entries:n,handles:p}},loadLocalEntry:r=>{let p=t.lookupPath(r).node,i=t.stat(r);if(t.isDir(i.mode))return{timestamp:i.mtime,mode:i.mode};if(t.isFile(i.mode))return p.contents=o.getFileDataAsTypedArray(p),{timestamp:i.mtime,mode:i.mode,contents:p.contents};throw new Error("node type not supported")},storeLocalEntry:(r,n)=>{if(t.isDir(n.mode))t.mkdirTree(r,n.mode);else if(t.isFile(n.mode))t.writeFile(r,n.contents,{canOwn:!0});else throw new Error("node type not supported");t.chmod(r,n.mode),t.utime(r,n.timestamp,n.timestamp)},removeLocalEntry:r=>{var n=t.stat(r);t.isDir(n.mode)?t.rmdir(r):t.isFile(n.mode)&&t.unlink(r)},loadRemoteEntry:async r=>{if(r.kind==="file"){let n=await r.getFile();return{contents:new Uint8Array(await n.arrayBuffer()),mode:a.FILE_MODE,timestamp:n.lastModifiedDate}}else{if(r.kind==="directory")return{mode:a.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+r.kind)}},storeRemoteEntry:async(r,n,p)=>{let i=r.get(l.dirname(n)),s=t.isFile(p.mode)?await i.getFileHandle(l.basename(n),{create:!0}):await i.getDirectoryHandle(l.basename(n),{create:!0});if(s.kind==="file"){let d=await s.createWritable();await d.write(p.contents),await d.close()}r.set(n,s)},removeRemoteEntry:async(r,n)=>{await r.get(l.dirname(n)).removeEntry(l.basename(n)),r.delete(n)},reconcile:async(r,n,p)=>{let i=0,s=[];Object.keys(n.entries).forEach(function(m){let c=n.entries[m],y=p.entries[m];(!y||t.isFile(c.mode)&&c.timestamp.getTime()>y.timestamp.getTime())&&(s.push(m),i++)}),s.sort();let d=[];if(Object.keys(p.entries).forEach(function(m){n.entries[m]||(d.push(m),i++)}),d.sort().reverse(),!i)return;let f=n.type==="remote"?n.handles:p.handles;for(let m of s){let c=l.normalize(m.replace(r.mountpoint,"/")).substring(1);if(p.type==="local"){let y=f.get(c),v=await a.loadRemoteEntry(y);a.storeLocalEntry(m,v)}else{let y=a.loadLocalEntry(m);await a.storeRemoteEntry(f,c,y)}}for(let m of d)if(p.type==="local")a.removeLocalEntry(m);else{let c=l.normalize(m.replace(r.mountpoint,"/")).substring(1);await a.removeRemoteEntry(f,c)}}};e.FS.filesystems.NATIVEFS_ASYNC=a}u(W,"initializeNativeFS");var ue=u(async e=>{let t=[];async function o(a){for await(let r of a.values())t.push(r),r.kind==="directory"&&await o(r)}u(o,"collect"),await o(e);let l=new Map;l.set(".",e);for(let a of t){let r=(await e.resolve(a)).join("/");l.set(r,a)}return l},"getFsHandles");function V(){let e={};return e.noImageDecoding=!0,e.noAudioDecoding=!0,e.noWasmDecoding=!1,e.preRun=[],e.quit=(t,o)=>{throw e.exited={status:t,toThrow:o},o},e}u(V,"createModule");function fe(e,t){e.preRun.push(function(){let o="/";try{e.FS.mkdirTree(t)}catch(l){console.error(`Error occurred while making a home directory '${t}':`),console.error(l),console.error(`Using '${o}' for a home directory instead`),t=o}e.ENV.HOME=t,e.FS.chdir(t)})}u(fe,"setHomeDirectory");function pe(e,t){e.preRun.push(()=>{for(let o of t)e.FS.mkdirTree(o),e.FS.mount(e.FS.filesystems.NODEFS,{root:o},o)})}u(pe,"mountLocalDirectories");function me(e,t){let o=x(t);e.preRun.push(()=>{let l=e._py_version_major(),a=e._py_version_minor();e.FS.mkdirTree("/lib"),e.FS.mkdirTree(`/lib/python${l}.${a}/site-packages`),e.addRunDependency("install-stdlib"),o.then(r=>{e.FS.writeFile(`/lib/python${l}${a}.zip`,r)}).catch(r=>{console.error("Error occurred while installing the standard library:"),console.error(r)}).finally(()=>{e.removeRunDependency("install-stdlib")})})}u(me,"installStdlib");function q(e,t){let o;t.stdLibURL!=null?o=t.stdLibURL:o=t.indexURL+"python_stdlib.zip",me(e,o),fe(e,t.homedir),pe(e,t._node_mounts),e.preRun.push(()=>W(e))}u(q,"initializeFileSystem");var _="0.24.0.dev0";function ye(e,t){return new Proxy(e,{get(o,l){return l==="get"?a=>{let r=o.get(a);return r===void 0&&(r=t.get(a)),r}:l==="has"?a=>o.has(a)||t.has(a):Reflect.get(o,l)}})}u(ye,"wrapPythonGlobals");function ge(e,t){e.runPythonInternal_dict=e._pyodide._base.eval_code("{}"),e.importlib=e.runPythonInternal("import importlib; importlib");let o=e.importlib.import_module;e.sys=o("sys"),e.sys.path.insert(0,t.homedir),e.os=o("os");let l=e.runPythonInternal("import __main__; __main__.__dict__"),a=e.runPythonInternal("import builtins; builtins.__dict__");e.globals=ye(l,a);let r=e._pyodide._importhook;r.register_js_finder(),r.register_js_module("js",t.jsglobals);let n=e.makePublicAPI();return r.register_js_module("pyodide_js",n),e.pyodide_py=o("pyodide"),e.pyodide_code=o("pyodide.code"),e.pyodide_ffi=o("pyodide.ffi"),e.package_loader=o("pyodide._package_loader"),e.sitepackages=e.package_loader.SITE_PACKAGES.__str__(),e.dsodir=e.package_loader.DSO_DIR.__str__(),e.defaultLdLibraryPath=[e.dsodir,e.sitepackages],e.os.environ.__setitem__("LD_LIBRARY_PATH",e.defaultLdLibraryPath.join(":")),n.pyodide_py=e.pyodide_py,n.globals=e.globals,n}u(ge,"finalizeBootstrap");function he(){if(typeof __dirname=="string")return __dirname;let e;try{throw new Error}catch(l){e=l}let t=G.default.parse(e)[0].fileName,o=t.lastIndexOf(k);if(o===-1)throw new Error("Could not extract indexURL path from pyodide module location");return t.slice(0,o)}u(he,"calculateIndexURL");async function D(e={}){await z();let t=e.indexURL||he();t=P(t),t.endsWith("/")||(t+="/"),e.indexURL=t;let o={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,homedir:"/home/pyodide",lockFileURL:t+"repodata.json",args:[],_node_mounts:[]},l=Object.assign(o,e),a=V();a.print=l.stdout,a.printErr=l.stderr,a.arguments=l.args;let r={config:l};a.API=r,q(a,l);let n=new Promise(f=>a.postRun=f);if(a.locateFile=f=>l.indexURL+f,typeof _createPyodideModule!="function"){let f=`${l.indexURL}pyodide.asm.js`;await S(f)}if(await _createPyodideModule(a),await n,a.exited)throw a.exited.toThrow;if(r.version!==_)throw new Error(`Pyodide version does not match: '${_}' <==> '${r.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);a.locateFile=f=>{throw new Error("Didn't expect to load any more file_packager files!")};let[p,i]=r.rawRun("import _pyodide_core");p&&a.API.fatal_loading_error(`Failed to import _pyodide_core
`,i);let s=ge(r,l);if(s.version.includes("dev")||r.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${s.version}/full/`),await r.packageIndexReady,r._pyodide._importhook.register_module_not_found_hook(r._import_name_to_package_name,r.repodata_unvendored_stdlibs_and_test),r.repodata_info.version!==_)throw new Error("Lock file version doesn't match Pyodide version");return r.package_loader.init_loaded_packages(),l.fullStdLib&&await s.loadPackage(r.repodata_unvendored_stdlibs),r.initializeStreams(l.stdin,l.stdout,l.stderr),s}u(D,"loadPyodide");globalThis.loadPyodide=D;return oe(ve);})();
try{Object.assign(exports,loadPyodide)}catch(_){}
globalThis.loadPyodide=loadPyodide.loadPyodide;
//# sourceMappingURL=pyodide.js.map
